{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _bind = require('classnames/bind');\n\nvar _bind2 = _interopRequireDefault(_bind);\n\nvar _zenscroll = require('zenscroll');\n\nvar _zenscroll2 = _interopRequireDefault(_zenscroll);\n\nvar _loader = require('../loader');\n\nvar _loader2 = _interopRequireDefault(_loader);\n\nvar _horizontalScroll = require('./horizontal-scroll');\n\nvar _horizontalScroll2 = _interopRequireDefault(_horizontalScroll);\n\nvar _rows = require('./rows');\n\nvar _rows2 = _interopRequireDefault(_rows);\n\nvar _headCell = require('./head-cell');\n\nvar _headCell2 = _interopRequireDefault(_headCell);\n\nvar _message = require('./message');\n\nvar _message2 = _interopRequireDefault(_message);\n\nvar _style = require('./style.css');\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _types = require('./types');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar cx = _bind2.default.bind(_style2.default);\n\nvar Table = function (_Component) {\n  _inherits(Table, _Component);\n\n  function Table() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Table);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Table.__proto__ || Object.getPrototypeOf(Table)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      headHeight: 0,\n      wrapperWidth: 0\n    }, _this.wrapperRef = (0, _react.createRef)(), _this.scrollWrapperRef = (0, _react.createRef)(), _this.headRef = (0, _react.createRef)(), _this.lastScrollX = 0, _this.lastScrollY = 0, _this.scrolling = false, _this.handleScroll = function () {\n      var scrollWrapper = _this.scrollWrapperRef.current;\n\n      if (!scrollWrapper) {\n        return;\n      }\n\n      if (scrollWrapper.scrollTop !== _this.lastScrollY) {\n        _this.onVerticalScroll();\n      }\n\n      _this.lastScrollX = scrollWrapper.scrollLeft;\n      _this.lastScrollY = scrollWrapper.scrollTop;\n    }, _this.onVerticalScroll = function () {\n      var wrapperEl = _this.wrapperRef.current;\n\n      if (!wrapperEl) {\n        return;\n      } // only one scrolling animation\n\n\n      if (!_this.scrolling) {\n        _this.scrolling = true;\n        var animationSpeed = 300;\n\n        _zenscroll2.default.to(wrapperEl, animationSpeed);\n\n        setTimeout(function () {\n          return _this.scrolling = false;\n        }, animationSpeed);\n      }\n    }, _this.renderFetching = function () {\n      return _react2.default.createElement(_message2.default, {\n        colSpan: _this.props.columns.length,\n        scrollWrapperRef: _this.scrollWrapperRef\n      }, _this.props.renderFetchingMessage ? // $FlowFixMe - this.props.renderFetchingMessage is undefined\n      _this.props.renderFetchingMessage({\n        columns: _this.props.columns,\n        className: cx('xsui-table-message')\n      }) : _react2.default.createElement(_loader2.default, {\n        size: 'xlg',\n        centered: true\n      }));\n    }, _this.renderEmptyMessage = function () {\n      return _react2.default.createElement(_message2.default, {\n        colSpan: _this.props.columns.length,\n        scrollWrapperRef: _this.scrollWrapperRef\n      }, _this.props.renderEmptyMessage && // $FlowFixMe - this.props.renderEmptyMessage is undefined\n      _this.props.renderEmptyMessage({\n        columns: _this.props.columns,\n        className: cx('xsui-table-message')\n      }));\n    }, _this.renderRows = function () {\n      if (_this.props.fetching) {\n        return _this.renderFetching();\n      }\n\n      if (!_this.props.rows.length) {\n        return _this.renderEmptyMessage();\n      }\n\n      return _react2.default.createElement(_rows2.default, {\n        rows: _this.props.rows,\n        columns: _this.props.columns,\n        renderRow: _this.props.renderRow,\n        compact: _this.props.compact\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Table, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // disable auto smooth scroll for all links\n      window.noZensmooth = true;\n      var headEl = this.headRef.current;\n      var scrollWrapperEl = this.scrollWrapperRef.current;\n\n      if (headEl) {\n        this.setState({\n          headHeight: headEl.clientHeight\n        });\n      }\n\n      if (scrollWrapperEl && this.props.stickyHead) {\n        this.lastScrollX = scrollWrapperEl.scrollLeft;\n        this.lastScrollY = scrollWrapperEl.scrollTop;\n        scrollWrapperEl.addEventListener('scroll', this.handleScroll);\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var headEl = this.headRef.current;\n\n      if (headEl && this.state.headHeight !== headEl.offsetHeight) {\n        this.setState({\n          headHeight: headEl.offsetHeight\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var scrollWrapperEl = this.scrollWrapperRef.current;\n\n      if (scrollWrapperEl) {\n        scrollWrapperEl.removeEventListener('scroll', this.handleScroll);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          columns = _props.columns,\n          className = _props.className,\n          tableClassName = _props.tableClassName,\n          scrollWrapperClassName = _props.scrollWrapperClassName,\n          compact = _props.compact,\n          horizontalScroll = _props.horizontalScroll,\n          stickyHead = _props.stickyHead;\n      return _react2.default.createElement('div', {\n        ref: this.wrapperRef,\n        className: cx('xsui-table__wrapper', className)\n      }, horizontalScroll && _react2.default.createElement(_horizontalScroll2.default, {\n        headHeight: this.state.headHeight,\n        headRef: this.headRef,\n        scrollWrapperRef: this.scrollWrapperRef\n      }), _react2.default.createElement('div', {\n        ref: this.scrollWrapperRef,\n        className: cx('xsui-table__scroll-wrapper', scrollWrapperClassName)\n      }, _react2.default.createElement('table', {\n        className: cx('xsui-table', tableClassName)\n      }, _react2.default.createElement('thead', null, _react2.default.createElement('tr', {\n        ref: this.headRef,\n        className: cx('xsui-table__row', 'xsui-table__head-row')\n      }, columns.map(function (column, idx) {\n        return _react2.default.createElement(_headCell2.default, {\n          key: 'column-' + idx,\n          column: column,\n          compact: compact,\n          stickyRow: stickyHead\n        });\n      }))), this.renderRows())));\n    }\n  }]);\n\n  return Table;\n}(_react.Component);\n\nTable.propTypes = {\n  columns: _propTypes2.default.arrayOf(function () {\n    return (typeof _types.bpfrpt_proptype_Column === 'function' ? _types.bpfrpt_proptype_Column.isRequired ? _types.bpfrpt_proptype_Column.isRequired : _types.bpfrpt_proptype_Column : _propTypes2.default.shape(_types.bpfrpt_proptype_Column).isRequired).apply(this, arguments);\n  }),\n  rows: _propTypes2.default.arrayOf(_propTypes2.default.object.isRequired),\n  className: _propTypes2.default.string,\n  tableClassName: _propTypes2.default.string,\n  scrollWrapperClassName: _propTypes2.default.string,\n  fetching: _propTypes2.default.bool,\n  compact: _propTypes2.default.bool,\n  horizontalScroll: _propTypes2.default.bool,\n  stickyHead: _propTypes2.default.bool,\n  renderRow: function renderRow() {\n    return (typeof _types.bpfrpt_proptype_RenderRow === 'function' ? _types.bpfrpt_proptype_RenderRow : _propTypes2.default.shape(_types.bpfrpt_proptype_RenderRow)).apply(this, arguments);\n  },\n  renderEmptyMessage: function renderEmptyMessage() {\n    return (typeof _types.bpfrpt_proptype_RenderEmptyMessage === 'function' ? _types.bpfrpt_proptype_RenderEmptyMessage : _propTypes2.default.shape(_types.bpfrpt_proptype_RenderEmptyMessage)).apply(this, arguments);\n  },\n  renderFetchingMessage: function renderFetchingMessage() {\n    return (typeof _types.bpfrpt_proptype_RenderFetchingMessage === 'function' ? _types.bpfrpt_proptype_RenderFetchingMessage : _propTypes2.default.shape(_types.bpfrpt_proptype_RenderFetchingMessage)).apply(this, arguments);\n  }\n};\nTable.defaultProps = {\n  columns: [],\n  rows: [],\n  className: '',\n  tableClassName: '',\n  scrollWrapperClassName: '',\n  fetching: false,\n  compact: false,\n  horizontalScroll: false,\n  stickyHead: false\n};\nexports.default = Table;","map":null,"metadata":{},"sourceType":"script"}